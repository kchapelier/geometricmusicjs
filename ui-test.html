<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" type="text/css" href="css/style.css" />
        <script type="text/javascript" src="js/vendors/lodash/lodash.min.js"></script>
        <script type="text/javascript" src="js/vendors/snap.svg/snap.svg.min.js"></script>
        <script type="text/javascript">
            function createButton(className, label, icon) {
                var button = document.createElement('button');
                button.className = className;

                if(icon) {
                    var i = document.createElement('i');
                    i.className = 'fa fa-' + icon + ' fa-sw';
                    button.appendChild(i);
                }

                var span = document.createElement('span');
                span.innerText = label;
                button.appendChild(span);

                return button;
            };

            function createLabelValue(className, label, value) {
                var span = document.createElement('span');
                span.className = 'label-value ' + className;
                var spanLabel = document.createElement('span');
                spanLabel.className = 'label';
                spanLabel.innerText = label + ' : ';
                span.appendChild(spanLabel);
                var spanValue = document.createElement('span');
                spanValue.className = 'value';
                spanValue.innerText = value;
                span.appendChild(spanValue);

                span.setValue = function(value) {
                    spanValue.innerText = value;
                };

                return span;
            }

            function createPopup(className, content) {
                var popup = document.createElement('div');
                popup.className = 'popup ' + className;
                var contentDiv = document.createElement('div');
                contentDiv.className = 'content';
                contentDiv.appendChild(content);
                popup.appendChild(contentDiv);

                return popup
            }

            var ShapeSvg = function(width, size, segments) {
                this.svg = new Snap(width, width);
                this.width = width;
                this.size = size;
                this.segments = segments;
                this.refresh();
            };

            ShapeSvg.prototype.createShape = function() {
                var w = this.width,
                    p = this.segments,
                    c = w / 2,
                    r = (this.width - 1) / (this.size + 1);

                var shape;

                if(p == 1) {
                    shape = this.svg.circle(c, c, r - c / 5);
                } else {
                    var points = [];

                    r = r - 3 * p - 3;

                    for (var cp = 1; cp <= p; cp++) {
                        points.push(c + r * Math.sin(cp * Math.PI / p * 2));
                        points.push(c + r * Math.cos(cp * Math.PI / p * 2));
                    }

                    shape = this.svg.polygon(points);
                }

                return shape;
            };

            ShapeSvg.prototype.refresh = function() {
                this.shape = this.createShape().attr({
                    fill: "#000",
                    fillOpacity : 0,
                    stroke: "#000",
                    strokeWidth: 2
                });

                this.shape.animate({
                    fillOpacity: 1
                }, 500);
            };

            function runSnap() {
                var container = document.getElementById('container');
                container.addEventListener('click', function() {
                    var svg = new ShapeSvg(200, 1, 3);
                    container.appendChild(svg.svg.node);
                });

            }
        </script>
    </head>
    <body onload="runSnap()">

    <div class="sidebar" id="static">
        <div class="details">
            <span class="label-value sample"><span class="label">Sample : </span><span class="value">piano01</span></span>
            <span class="label-value size"><span class="label">Size : </span><span class="value">2</span></span>
            <span class="label-value segments"><span class="label">Segments : </span><span class="value">4</span></span>
            <span class="label-value vector"><span class="label">Vector : </span><span class="value">Normal</span></span>
            <span class="label-value vector"><span class="label">Vector : </span><span class="value">Normal</span></span>
            <span class="label-value vector"><span class="label">Vector : </span><span class="value">Reverse</span></span>
            <span class="label-value vector"><span class="label">Vector : </span><span class="value">2 Repeats</span></span>
        </div>

        <div class="buttons">
            <span class="label-value bpm"><span class="label">BPM : </span><span class="value">120.80</span></span>

            <span class="label-value duration"><span class="label">Duration : </span><span class="value">00:00</span></span>

            <button class="start"><i class="fa fa-play fa-fw"></i>Start</button>
            <button class="startRecording"><i class="fa fa-circle fa-fw"></i>Record</button>
            <!--
            <button class="stop"><i class="fa fa-stop fa-fw"></i>Stop</button>
            <button class="stopRecording"><i class="fa fa-download fa-fw"></i>Stop recording</button>
            -->
        </div>





    </div>
    <div class="main" id="container">
        <svg id="svg" width="200" height="200" style="margin: 30px 0 0 60px;"></svg>
    </div>


    <!--
    <div id="dynamic">

    </div>

    <script>
        var container = document.getElementById('dynamic');

        container.appendChild(createButton('start', 'Start'));
        container.appendChild(createButton('stop', 'Stop'));
        container.appendChild(createButton('startRecording', 'Record'));
        container.appendChild(createButton('stopRecording', 'Stop recording'));

        container.appendChild(createLabelValue('bpm', 'BPM', '120.80'));
        container.appendChild(createLabelValue('duration', 'Duration', '00:00'));
    </script>
    -->
        <!--
        <div class="popup">
            <div class="content">
                pp
            </div>
        </div>
        -->
    </body>
</html>