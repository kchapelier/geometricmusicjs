var Aural=function(){"use strict";var a={Music:{Tuning:null,Note:null,Scale:null,ScaleList:null,Chord:null,ChordList:null,Interval:null,IntervalList:null,Phrase:null},Sound:{BufferMap:null,Enveloppe:{Fixed:null,DAHDSR:null},Granular:{Collection:null},Interpolation:null,Wavelet:{Wavelet:null,Collection:null}},Utils:{Buffer:null,XHR:null,Midi:{ControlChangesDictionary:null,File:null},MML:{File:null},Scala:{File:null},Support:null,Sfz:{Region:null,File:null}},Info:{version:"-",stable:!1}};return a.Music.Chord=function(a,b,c,d,e){this.name=c,this.shortnames=[].concat(b),this.intervals=a,this.setKey(d||"C",e)},a.Music.Chord.prototype.intervals=null,a.Music.Chord.prototype.name=null,a.Music.Chord.prototype.shortnames=null,a.Music.Chord.prototype.key=null,a.Music.Chord.prototype.octave=null,a.Music.Chord.prototype.getType=function(){switch(this.intervals.length){case 1:return"monad";case 2:return"dyad";case 3:return"triad";case 4:return"tetrad";case 5:return"pentad";case 6:return"hexad";case 7:return"heptad";case 8:return"octad";case 9:return"ennead";case 10:return"decad";case 11:return"undecad";case 12:return"dodecad";default:return""}},a.Music.Chord.prototype.getIntervals=function(){for(var b=[],c=0,d=0,e=this.intervals.length;e>d;d++)c+=100*this.intervals[d],b.push(a.Music.IntervalList.getInterval(c));return b},a.Music.Chord.prototype.getNotes=function(){for(var b=[],c=this.getKeyOffset(),d=0,e=this.intervals.length;e>d;d++)c+=this.intervals[d],b.push(a.Music.Note.createFromMidi(c));return b},a.Music.Chord.prototype.getNotesAsLabels=function(){for(var b=[],c=this.getKeyOffset(),d=null,e=0,f=this.intervals.length;f>e;e++)c+=this.intervals[e],d=a.Music.Note.getLabelFromMidi(c),b.push(d[0]);return b},a.Music.Chord.prototype.setKey=function(b,c){var d=a.Music.Note.parseLabel(b);this.key=d[0],this.octave=c||d[1]},a.Music.Chord.prototype.transpose=function(b){var c=this.getKeyOffset()+b,d=a.Music.Note.getLabelFromMidi(c);this.key=d[0],this.octave=d[1]},a.Music.Chord.prototype.getKeyOffset=function(){return a.Music.Note.getMidiFromLabel(this.key,this.octave)},a.Music.Chord.prototype.copy=function(b,c){return new a.Music.Chord(this.intervals,this.shortnames,this.name,b,c)},a.Music.ChordList={chords:[],shortnameTranslations:{},addChord:function(b,c,d){this.chords.push(new a.Music.Chord(b,c,d))},normalizeInput:function(b){var c,d;for(c=0,d=b.length;d>c;c++){var e=typeof b[c];switch(e){case"string":var f=a.Music.Note.getMidiFromLabel(b[c]);b[c]=f;break;case"object":b[c]=b[c].midi}}b.sort(function(a,b){return a-b});var g={offset:b[0],intervals:null};for(d=b.length;d--;)b[d]-=b[Math.max(0,d-1)];return g.intervals=b,g},compareIntervals:function(b,c){if(b.intervals.length===c.intervals.length){for(var d=!0,e=0,f=b.intervals.length;f>e;e++)if(b.intervals[e]!==c.intervals[e]){d=!1;break}if(d){var g=a.Music.Note.getLabelFromMidi(b.offset);return c.copy(g[0],g[1])}}return null},fits:function(a){for(var b=this.normalizeInput(a),c=[],d=this.chords.length;d--;){var e=this.compareIntervals(b,this.chords[d]);e&&c.push(e)}return c},getChord:function(a,b,c){var d=this.parseName(a);d&&(b=b||d[0],c=c||d[1],a=d[2]);var e=a;for(var f in this.shortnameTranslations)this.shortnameTranslations.hasOwnProperty(f)&&(e=e.replace(f,this.shortnameTranslations[f]));for(var g=0,h=this.chords.length;h>g;g++)if(this.chords[g].name===a||this.chords[g].shortnames.indexOf(e)>-1)return this.chords[g].copy(b,c);return null},addDirectShortnameTranslation:function(a,b){this.shortnameTranslations[a]=b},parseName:function(b){var c=/^([CDEFGAB][#b]?-?[0-9]*) *(.*)/,d=c.exec(b),e=null,f=null;return d&&(f=d[1],b=d[2],f=a.Music.Note.parseLabel(f),e=f[1],f=f[0]),[f,e,b]},getContainedChord:function(){throw"to implement"}},a.Music.Interval=function(a,b){this.titles=a,this.cents=b},a.Music.Interval.prototype.titles=null,a.Music.Interval.prototype.cents=null,a.Music.Interval.prototype.addTitles=function(a){for(var b=0,c=a.length;c>b;b++)this.titles.push(a[b])},a.Music.Interval.prototype.getNoteAtInterval=function(a,b){var c=a.copy();return c.applyInterval(this,b),c},a.Music.IntervalList={intervals:{},addInterval:function(b,c){this.intervals[b]?this.intervals[b].addTitles(c):this.intervals[b]=new a.Music.Interval(c,b)},match:function(a,b){var c=a.cents-b.cents+100*(a.midi-b.midi),d=this.getIdentifier(c);return this.intervals[d]?this.intervals[d]:null},getInterval:function(a){var b;switch(typeof a){case"number":a=this.getIdentifier(a),b=this.intervals[a]?this.intervals[a]:null;break;case"string":for(var c in this.intervals)if(this.intervals.hasOwnProperty(c)&&this.intervals[c].titles.indexOf(a)>=0){b=this.intervals[c];break}}return b},getIdentifier:function(a){return(Math.floor(1e3*Math.abs(a))/1e3).toString(10)}},a.Music.Note=function(a,b,c,d,e){null!==c?this.initializeFromMidi(c,d):null!==e?this.initializeFromFrequency(e):this.initializeFromLabel(a,b,d)},a.Music.Note.prototype.midi=null,a.Music.Note.prototype.cents=null,a.Music.Note.prototype.label=null,a.Music.Note.prototype.octave=null,a.Music.Note.prototype.frequency=null,a.Music.Note.prototype.initializeFromFrequency=function(b){var c=a.Music.Note.getMidiFromFrequency(b),d=a.Music.Note.getLabelFromMidi(c[0]);this.label=d[0],this.octave=d[1],this.midi=c[0],this.cents=c[1],this.frequency=Math.abs(b)},a.Music.Note.prototype.initializeFromLabel=function(b,c,d){d=0|d;var e=a.Music.Note.parseLabel(b);c=c||e[1],b=e[0],this.midi=a.Music.Note.getMidiFromLabel(b,c),this.frequency=a.Music.Note.getFrequencyFromMidi(this.midi,d),this.cents=d,this.label=b,this.octave=c},a.Music.Note.prototype.initializeFromMidi=function(b,c){c=0|c;var d=a.Music.Note.getLabelFromMidi(b);this.label=d[0],this.octave=d[1],this.frequency=a.Music.Note.getFrequencyFromMidi(b,c),this.midi=b,this.cents=c},a.Music.Note.prototype.getPeriod=function(){return 1e3/this.frequency},a.Music.Note.prototype.getSolfegeName=function(b){var c=this.midi%12;return 0>c&&(c+=12),b?a.Music.Note.romanSolfegeName[c]:a.Music.Note.solfegeName[c]},a.Music.Note.prototype.getHarmonic=function(b){return a.Music.Note.createFromFrequency(this.frequency*b)},a.Music.Note.prototype.getHarmonicSeries=function(a){var b=[];a=Math.max(1,a);for(var c=1;a>=c;c++)b.push(this.frequency*c);return b},a.Music.Note.prototype.setCents=function(a){this.transpose(0,a-this.cents)},a.Music.Note.prototype.transpose=function(a,b){this.midi+=a,b&&(this.cents+=b),this.initializeFromMidi(this.midi,this.cents)},a.Music.Note.prototype.applyInterval=function(b,c){if(c=c||1,"string"==typeof b&&(b=a.Music.IntervalList.getInterval(b)),b){var d=Math.floor(b.cents/100),e=b.cents%100;this.transpose(d*c,e*c)}},a.Music.Note.prototype.copy=function(){return a.Music.Note.createFromMidi(this.midi,this.cents)},a.Music.Note.notes=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],a.Music.Note.solfegeName=["Do","Do#","Re","Re#","Mi","Fa","Fa#","Sol","Sol#","La","La#","Ti"],a.Music.Note.romanSolfegeName=["Do","Do#","Re","Re#","Mi","Fa","Fa#","Sol","Sol#","La","La#","Si"],a.Music.Note.createFromFrequency=function(b){return new a.Music.Note(null,null,null,null,b)},a.Music.Note.createFromMidi=function(b,c){return new a.Music.Note(null,null,b,c,null)},a.Music.Note.createFromLabel=function(b,c,d){return new a.Music.Note(b,c,null,d,null)},a.Music.Note.getLabelFromMidi=function(a){var b=a%12;0>b&&(b=12+b);var c=Math.floor(a/12)-1,d=this.notes[b];return[d,c]},a.Music.Note.getFrequencyFromMidi=function(b,c){return c=c||0,a.Music.Tuning.middleA*Math.pow(2,(b-69+c/100)/12)},a.Music.Note.parseLabel=function(a){var b=/^([CDEFGAB])([b#]?)(-?[0-9]*)$/g,c=b.exec(a);a=c[1];var d=c[2],e=parseInt(c[3],10);isNaN(e)&&(e=0);var f=this.notes.indexOf(a)||0;switch(d){case"#":f++;break;case"b":f--}return 0>f?(f+=12,e--):f>=12&&(f-=12,e++),a=this.notes[f],[a,e]},a.Music.Note.getMidiFromLabel=function(b,c){var d=a.Music.Note.parseLabel(b);return c=c||d[1],b=d[0],this.notes.indexOf(b)+12*(c+1)},a.Music.Note.getMidiFromFrequency=function(b){var c=Math.log(Math.abs(b)/a.Music.Tuning.middleA)/Math.log(2)*12+69,d=Math.round(c),e=100*(c-d);return[d,e]},a.Music.Phrase=function(a,b){this.noteEvents=[],this.textEvents=[],a=a||10,this.setFlexible(b),this.setDuration(a)},a.Music.Phrase.prototype.name=null,a.Music.Phrase.prototype.bpm=null,a.Music.Phrase.prototype.duration=null,a.Music.Phrase.prototype.flexible=null,a.Music.Phrase.prototype.noteEvents=null,a.Music.Phrase.prototype.textEvents=null,a.Music.Phrase.prototype.setName=function(a){this.name=a},a.Music.Phrase.prototype.setBpm=function(a){this.bpm=a},a.Music.Phrase.prototype.setDuration=function(a){this.duration=a},a.Music.Phrase.prototype.setFlexible=function(a){this.flexible=!!a},a.Music.Phrase.prototype.removeEvent=function(b){var c=-1;return b instanceof a.Music.Phrase.TextEvent?(c=this.textEvents.indexOf(b),c>=0&&this.textEvents.splice(c,1)):b instanceof a.Music.Phrase.NoteEvent&&(c=this.noteEvents.indexOf(b),c>=0&&this.noteEvents.splice(c,1)),c>=0},a.Music.Phrase.prototype.add=function(a){var b,c;for(this.setDuration(Math.max(this.duration,a.duration)),b=0,c=a.noteEvents.length;c>b;b++)this.noteEvents.push(a.noteEvents[b].copy());for(b=0,c=a.textEvents.length;c>b;b++)this.textEvents.push(a.textEvents[b].copy())},a.Music.Phrase.prototype.addNoteEvent=function(b,c,d,e){e=e||{},d=d||0;var f=new a.Music.Phrase.NoteEvent(b,e.detune||0,c,d,e.velocity||1,e.pan||0);return this.noteEvents.push(f),this.flexible&&(this.duration=Math.max(this.duration,c+d)),f},a.Music.Phrase.prototype.addTextEvent=function(b,c,d,e){e=e||{},d=d||0;var f=new a.Music.Phrase.TextEvent(e.type,b,c,d);return this.textEvents.push(f),this.flexible&&(this.duration=Math.max(this.duration,c+d)),f},a.Music.Phrase.prototype.restrictEvents=function(a){var b,c;a&&this.setDuration(a),a=this.duration;var d=null,e=[];for(b=0,c=this.noteEvents.length;c>b;b++)d=this.noteEvents[b],d.start<a&&(d.duration=Math.min(a-d.start,d.duration),e.push(d));for(this.noteEvents=e,e=[],b=0,c=this.textEvents.length;c>b;b++)d=this.textEvents[b],d.start<a&&(d.duration=Math.min(a-d.start,d.duration),e.push(d));this.textEvents=e},a.Music.Phrase.prototype.getAllNotes=function(){for(var b=[],c={},d=null,e=0,f=this.noteEvents.length;f>e;e++)d=this.noteEvents[e].midi,c[d]||(c[d]=!0,b.push(a.Music.Note.createFromMidi(d)));return b.sort(function(a,b){return a.midi>b.midi?1:a.midi<b.midi?-1:0}),b},a.Music.Phrase.prototype.getMatchingScales=function(b){var c=this.getAllNotes();return a.Music.ScaleList.fits(c,b)},a.Music.Phrase.prototype.subPhrase=function(b,c,d,e){var f,g,h=new a.Music.Phrase,i=this.getEvents(b,c,d,e),j=null;for(f=0,g=i.noteEvents.length;g>f;f++)j=i.noteEvents[f],h.addNoteEvent(j.midi,j.start-b,j.duration,{detune:j.detune,velocity:j.velocity,pan:j.pan});for(f=0,g=i.textEvents.length;g>f;f++)j=i.textEvents[f],h.addTextEvent(j.text,j.start-b,j.duration,{type:j.type});return h},a.Music.Phrase.prototype.getEvents=function(a,b,c,d){var e,f,g={noteEvents:[],textEvents:[]},h=null,i=a+b;if(c)for(e=0,f=this.noteEvents.length;f>e;e++)h=this.noteEvents[e],h.start>=a&&h.start<=i&&g.noteEvents.push(h);if(d)for(e=0,f=this.textEvents.length;f>e;e++)h=this.textEvents[e],h.start>=a&&h.start<=i&&g.textEvents.push(h);return g},a.Music.Phrase.prototype.copy=function(){for(var b=new a.Music.Phrase(this.duration,this.flexible),c=0,d=this.noteEvents.length;d>c;c++);return b.setDuration(this.duration),b},a.Music.Phrase.NoteEvent=function(a,b,c,d,e,f){this.start=c||0,this.midi=a,this.duration=d||0,this.velocity=e||1,this.pan=f||0,this.detune=b||0},a.Music.Phrase.NoteEvent.prototype.velocity=null,a.Music.Phrase.NoteEvent.prototype.pan=null,a.Music.Phrase.NoteEvent.prototype.midi=null,a.Music.Phrase.NoteEvent.prototype.detune=null,a.Music.Phrase.NoteEvent.prototype.start=null,a.Music.Phrase.NoteEvent.prototype.duration=null,a.Music.Phrase.NoteEvent.prototype.copy=function(){return new a.Music.Phrase.NoteEvent(this.midi,this.detune,this.start,this.duration,this.velocity,this.pan)},a.Music.Phrase.TextEvent=function(a,b,c,d){this.start=c||0,this.type=a||"marker",this.text=b,this.duration=d||0},a.Music.Phrase.TextEvent.prototype.text=null,a.Music.Phrase.TextEvent.prototype.start=null,a.Music.Phrase.TextEvent.prototype.duration=null,a.Music.Phrase.TextEvent.prototype.type=null,a.Music.Phrase.TextEvent.prototype.copy=function(){return new a.Music.Phrase.TextEvent(this.type,this.text,this.start,this.duration)},a.Music.Scale=function(a,b,c){this.titles=a,this.intervals=b,this.setKey(c||"C")},a.Music.Scale.prototype.titles=null,a.Music.Scale.prototype.intervals=null,a.Music.Scale.prototype.key=null,a.Music.Scale.HEMITONIC_TYPE_BASIC="",a.Music.Scale.HEMITONIC_TYPE_COUNT="count",a.Music.Scale.HEMITONIC_TYPE_SUCCESSION="succession",a.Music.Scale.prototype.getHemitonicType=function(b){var c,d,e=0,f=0,g=0,h=0;for(c=0,d=this.intervals.length;d>c;c++)1===this.intervals[c]&&(e++,1===g&&(h++,f=Math.max(f,h))),g=this.intervals[c];if(this.intervals.length<12)for(c=0,d=this.intervals.length;d>c;c++)1===this.intervals[c]&&1===g&&(h++,f=Math.max(f,h)),g=this.intervals[c];switch(b){case a.Music.Scale.HEMITONIC_TYPE_COUNT:switch(e){case 0:return"anhemitonic";case 1:return"unhemitonic";case 2:return"dihemitonic";case 3:return"trihemitonic";case 4:return"tetrahemitonic";case 5:return"pentahemitonic";case 6:return"hexahemitonic";case 7:return"heptahemitonic";case 8:return"octahemitonic";case 9:return"enneahemitonic";case 10:return"decahemitonic";case 11:return"undecahemitonic";default:return"chromatic"}break;case a.Music.Scale.HEMITONIC_TYPE_SUCCESSION:return e>0?f>1?"cohemitonic":"ancohemitonic":"anhemitonic";default:return e>0?"hemitonic":"anhemitonic"}},a.Music.Scale.prototype.getType=function(){switch(this.intervals.length){case 1:return"monotonic";case 2:return"ditonic";case 3:return"tritonic";case 4:return"tetratonic";case 5:return"pentatonic";case 6:return"hexatonic";case 7:return"heptatonic";case 8:return"octatonic";case 9:return"enneatonic";case 10:return"decatonic";case 11:return"undecatonic";case 12:return"chromatic";default:return""}},a.Music.Scale.prototype.getNotes=function(b){b=b||0;for(var c=[],d=this.getKeyOffset(),e=0,f=this.intervals.length;f>e;e++)c.push(a.Music.Note.createFromMidi(d+12*b)),d+=this.intervals[e];return c},a.Music.Scale.prototype.getNotesAsLabels=function(){for(var b=[],c=this.getKeyOffset(),d=null,e=0,f=this.intervals.length;f>e;e++)d=a.Music.Note.getLabelFromMidi(c),b.push(d[0]),c+=this.intervals[e];return b},a.Music.Scale.prototype.getIntervals=function(){for(var b=[],c=0,d=0,e=this.intervals.length;e>d;d++)b.push(a.Music.IntervalList.getInterval(c)),c+=100*this.intervals[d];return b},a.Music.Scale.prototype.getChords=function(b){b=b||0;for(var c=a.Music.ChordList.chords,d=[],e=0,f=c.length;f>e;e++)for(var g=0;12>g;g++){var h=c[e].copy(a.Music.Note.getLabelFromMidi(g+12*b).join(""));this.containsChord(h)&&d.push(h)}return d},a.Music.Scale.prototype.containsChord=function(a){for(var b=!0,c=a.getNotesAsLabels(),d=this.getNotesAsLabels(),e=0,f=c.length;f>e;e++)if(-1===d.indexOf(c[e])){b=!1;break}return b},a.Music.Scale.prototype.setKey=function(b){var c=a.Music.Note.parseLabel(b);this.key=c[0]},a.Music.Scale.prototype.transpose=function(b){var c=this.getKeyOffset()+b,d=a.Music.Note.getLabelFromMidi(c);this.key=d[0]},a.Music.Scale.prototype.getKeyOffset=function(){return a.Music.Note.getMidiFromLabel(this.key)%12},a.Music.Scale.prototype.copy=function(b){return new a.Music.Scale(this.titles,this.intervals,b)},a.Music.ScaleList={scales:[],addScale:function(b,c){this.scales.push(new a.Music.Scale(c,b))},compareIntervals:function(b,c){var d,e,f,g,h=b.intervals,i=c.intervals,j=[];for(d=0,f=i.length;f>d;d++){var k=i.slice(0),l=0;for(e=0;d>e;e++)l+=k[0],k.push(k.shift());var m=0,n=!1;for(e=0,g=h.length;g>e;e++){var o=h[e],p=0;for(n=!1;;){if(p+=k[m],m++,p===o){n=!0;break}if(m>=k.length||p>o)break}if(!n)break}if(n){var q=a.Music.Note.getLabelFromMidi(b.offset-l+12);j.push(c.copy(q[0]))}}return j},normalizeInput:function(b){var c,d;for(c=0,d=b.length;d>c;c++){var e=typeof b[c];switch(e){case"string":var f=a.Music.Note.getMidiFromLabel(b[c]);b[c]=f%12;break;case"object":b[c]=b[c].midi%12}}b.sort(function(a,b){return a-b});var g={offset:b[0],intervals:null},h=b.slice(0);for(h.push(h[0]+12),d=h.length;d--;)h[d]-=h[d-1];return h.shift(),g.intervals=h,g},fits:function(a,b){for(var c=this.normalizeInput(a),d=[],e=this.scales.length;e--;)for(var f=this.compareIntervals(c,this.scales[e]),g=f.length;g--;)b&&f[g].intervals.length!==c.intervals.length||d.push(f[g]);return d},getScale:function(a,b){for(var c=0,d=this.scales.length;d>c;c++)for(var e=0,f=this.scales[c].titles.length;f>e;e++)if(this.scales[c].titles[e]===a)return this.scales[c].copy(b);return null},getSimilarScales:function(a,b){return this.fits(a.getNotesAsLabels(),b)},getContainedScales:function(){throw"to implements"}},a.Music.Tuning={middleA:440,defaultMiddleA:440,setMiddleA:function(a){a=a||this.defaultMiddleA,this.middleA=a}},a.Sound.Buffer=function(b,c){this.channels=[],"function"==typeof b&&(b=b());var d={}.toString.call(b);if("[object AudioBuffer]"===d){var e=b.numberOfChannels;c=b.sampleRate;for(var f=0;e>f;f++)this.channels[f]=b.getChannelData(f)}else this.channels[0]="[object ArrayBuffer]"===d||"[object Float32Array]"===d?b:new Float32Array("[object Array]"===d?b:0);this.sampleRate=c||a.Utils.Support.getSampleRate(),this.length=this.channels[0].length,this.duration=this.length/this.sampleRate,this.numberOfChannels=this.channels.length},a.Sound.Buffer.prototype.channels=null,a.Sound.Buffer.prototype.sampleRate=null,a.Sound.Buffer.prototype.duration=null,a.Sound.Buffer.prototype.numberOfChannels=null,a.Sound.Buffer.prototype.getSample=function(b,c){return c=c||0,this.channels[c]?a.Sound.Interpolation.process(b,this.channels[c]):0},a.Sound.Buffer.prototype.getChannelData=function(a){return this.channels[a]?this.channels[a]:new Float32Array(0)},a.Sound.Buffer.prototype.getWavelets=function(b){return this.channels[b]?new a.Sound.Wavelet.Collection(this.channels[b]):null},a.Sound.Buffer.prototype.makeMono=function(a){if(a){var b=this.channels.length,c=[];if(b>0){var d,e,f,g;for(d=0;b>d;d++)for(g=this.getChannelData(d),e=0,f=g.length;f>e;e++)c.length>e?c[e]+=g[e]:c.push(g[e]);for(d=0,f=c.length;f>d;d++)c[d]/=b}this.channels=[c]}else for(;this.channels.length>1;)this.channels.pop();this.numberOfChannels=this.channels.length},a.Sound.Buffer.prototype.makeStereo=function(){if(1===this.channels.length)this.channels.push(this.getChannelData(0));else if(this.channels.length>2)for(;this.channels.length>2;)this.channels.pop();this.numberOfChannels=this.channels.length},a.Sound.BufferMap=function(a,b,c,d,e,f){this.buffer=a,this.transientMap=null,this.volumeMap=null,this.setVolumeMapGate(b),this.setVolumeMapSmoothing(c),this.setVolumeMapLimiting(d),this.setTransientMapGate(e),this.setTransientMapLimiting(f)},a.Sound.BufferMap.prototype.buffer=null,a.Sound.BufferMap.prototype.waveletsCache=null,a.Sound.BufferMap.prototype.volumeMap=null,a.Sound.BufferMap.prototype.transientMap=null,a.Sound.BufferMap.prototype.volumeMapLimiting=null,a.Sound.BufferMap.prototype.volumeMapGate=null,a.Sound.BufferMap.prototype.volumeMapSmoothing=null,a.Sound.BufferMap.prototype.transientMapGate=null,a.Sound.BufferMap.prototype.transientMapLimiting=null,a.Sound.BufferMap.prototype.forceRefresh=function(){this.transientMap=null,this.volumeMap=null,this.waveletsCache=null},a.Sound.BufferMap.prototype.getWavelets=function(){return null===this.waveletsCache&&(this.waveletsCache=new a.Sound.Wavelet.Collection(this.buffer)),this.waveletsCache},a.Sound.BufferMap.prototype.setVolumeMapGate=function(a){this.volumeMapGate=Math.abs(a||0),this.transientMap=null,this.volumeMap=null},a.Sound.BufferMap.prototype.setVolumeMapSmoothing=function(a){this.volumeMapSmoothing=Math.abs(a||0),this.transientMap=null,this.volumeMap=null},a.Sound.BufferMap.prototype.setVolumeMapLimiting=function(a){this.volumeMapLimiting=Math.max(1,a||1),this.transientMap=null,this.volumeMap=null},a.Sound.BufferMap.prototype.setTransientMapGate=function(a){this.transientMapGate=a||.3,this.transientMap=null},a.Sound.BufferMap.prototype.setTransientMapLimiting=function(a){this.transientMapLimiting=a||2,this.transientMap=null},a.Sound.BufferMap.prototype.processPolarVolumeMap=function(b,c){for(var d,e={0:0},f=this.volumeMapGate,g=this.volumeMapSmoothing,h=this.volumeMapLimiting,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=b.length;q>p;p++)if(d=b.wavelets[p],d.polarity===c){for(m=d.maxValue,m=m>f?d.maxValue:0,i=m,l=0,j=0,k=0;m>=i&&h>j;){p++,j++;var r=b.wavelets[p]?b.wavelets[p]:null;if(r&&r.polarity===c){if(n=r.maxValue,n>i){if(n-i>Math.sqrt(h)/1e4){p--;break}i=n,j=0,l=k}m=n}k+=r?r.length:0}e[o+l]=i,o+=d.length+k}else o+=d.length;e[this.buffer.length-1]=0;var s=0,t=0,u=0;k=0,m=0;var v=new Float32Array(this.buffer.length);for(var w in e)if(e.hasOwnProperty(w)){for(w*=1,m=e[w],m=u>m?m*(1-g)+u*g:m,v[w]=m,k=w-s,t=s;w>s;s++)v[s]=a.Sound.Interpolation.linear((s-t)/k,[u,m]);u=m,s=w}return v},a.Sound.BufferMap.prototype.processVolumeMap=function(){for(var a=this.getWavelets(),b=this.processPolarVolumeMap(a,1),c=this.processPolarVolumeMap(a,-1),d=new Float32Array(this.buffer.length),e=0,f=d.length;f>e;e++)d[e]=Math.max(c[e],b[e]);this.volumeMap=d},a.Sound.BufferMap.prototype.getVolumeMap=function(){return null===this.volumeMap&&this.processVolumeMap(),this.volumeMap},a.Sound.BufferMap.prototype.processTransientsMap=function(){for(var a=0,b=0,c=0,d=0,e=this.getVolumeMap(),f=this.transientMapGate,g=this.transientMapLimiting,h=2e3,i=0,j=[],k=0,l=e.length;l>k;k++)b=this.volumeMap[k],d=c=b,Math.sqrt(b-a)>.1&&b>f&&1>i?(j.push({position:k,min:c,max:d}),a=b,i=h):(a=a*g+b*(1-g),i--);this.transientMap=j},a.Sound.BufferMap.prototype.getTransientsMap=function(){return null===this.transientMap&&this.processTransientsMap(),this.transientMap},a.Sound.Enveloppe.DAHDSR=function(a){a&&this.setProperties(a),this.process()},a.Sound.Enveloppe.DAHDSR.prototype.setProperties=function(a){for(var b in a)a.hasOwnProperty(b)&&this.setProperty(b,a[b])},a.Sound.Enveloppe.DAHDSR.prototype.delay=0,a.Sound.Enveloppe.DAHDSR.prototype.attack=0,a.Sound.Enveloppe.DAHDSR.prototype.attackLogBias=0,a.Sound.Enveloppe.DAHDSR.prototype.hold=0,a.Sound.Enveloppe.DAHDSR.prototype.decay=0,a.Sound.Enveloppe.DAHDSR.prototype.decayLogBias=0,a.Sound.Enveloppe.DAHDSR.prototype.sustain=1,a.Sound.Enveloppe.DAHDSR.prototype.release=0,a.Sound.Enveloppe.DAHDSR.prototype.releaseLogBias=0,a.Sound.Enveloppe.DAHDSR.prototype.inverted=!1,a.Sound.Enveloppe.DAHDSR.prototype.processedShapeDAHD=null,a.Sound.Enveloppe.DAHDSR.prototype.processedShapeR=null,a.Sound.Enveloppe.DAHDSR.prototype.setProperty=function(){},a.Sound.Enveloppe.DAHDSR.prototype.setDelay=function(a){this.delay=Math.max(0,a),this.processDAHD()},a.Sound.Enveloppe.DAHDSR.prototype.setAttack=function(a){this.attack=Math.max(0,a),this.processDAHD()},a.Sound.Enveloppe.DAHDSR.prototype.setAttackLogBias=function(a){this.attackLogBias=a,this.processDAHD()},a.Sound.Enveloppe.DAHDSR.prototype.setHold=function(a){this.hold=Math.max(0,a),this.processDAHD()},a.Sound.Enveloppe.DAHDSR.prototype.setDecay=function(a){this.decay=Math.max(0,a),this.processDAHD()},a.Sound.Enveloppe.DAHDSR.prototype.setDecayLogBias=function(a){this.decayLogBias=a,this.processDAHD()},a.Sound.Enveloppe.DAHDSR.prototype.setSustain=function(a){this.sustain=Math.min(1,Math.max(0,a)),this.processDAHD()},a.Sound.Enveloppe.DAHDSR.prototype.setRelease=function(a){this.release=Math.max(0,a),this.processR()},a.Sound.Enveloppe.DAHDSR.prototype.setReleaseLogBias=function(a){this.releaseLogBias=a,this.processR()},a.Sound.Enveloppe.DAHDSR.prototype.setInverted=function(a){this.inverted=!!a},a.Sound.Enveloppe.DAHDSR.prototype.getAmplitude=function(b,c,d){var e;if(c&&b>=c){if(b-=c,b>=this.processedShapeR.length)return 0;var f=this.getAmplitude(c,null,d);e=f*a.Sound.Interpolation.linear(b,this.processedShapeR)}else e=b>=this.processedShapeDAHD.length?this.sustain:a.Sound.Interpolation.linear(b,this.processedShapeDAHD),this.inverted&&(e=1-e);return e},a.Sound.Enveloppe.DAHDSR.prototype.process=function(){this.processDAHD(),this.processR()},a.Sound.Enveloppe.DAHDSR.prototype.processDAHD=function(){var a,b=new Float32Array(this.delay+this.attack+this.hold+this.decay),c=0;for(a=0;a<this.delay;a++,c++)b[c]=0;for(a=0;a<this.attack;a++,c++)b[c]=a/this.attack;for(a=0;a<this.hold;a++,c++)b[c]=1;for(a=0;a<this.decay;a++,c++)b[c]=this.sustain+(1-a/this.decay)*(1-this.sustain);this.processedShapeDAHD=b},a.Sound.Enveloppe.DAHDSR.prototype.processR=function(){for(var a=new Float32Array(this.release),b=0;b<this.release;b++)a[b]=1-b/this.release;this.processedShapeR=a},a.Sound.Enveloppe.Fixed=function(a,b,c){this.resolution=c>0?c:1,this.shape=a,this.setLength(b)},a.Sound.Enveloppe.Fixed.prototype.length=null,a.Sound.Enveloppe.Fixed.prototype.resolution=null,a.Sound.Enveloppe.Fixed.prototype.shape=null,a.Sound.Enveloppe.Fixed.prototype.processedShape=null,a.Sound.Enveloppe.Fixed.prototype.process=function(){var b,c,d,e=this.length*this.resolution,f=new Float32Array(this.length),g={}.toString.call(this.shape),h=0;switch(g){case"[object Function]":for(b=0,c=e;c>b;b++)f[b]=this.shape(b,c),h=Math.max(Math.abs(f[b]),h);break;case"[object String]":var i=this.shape.split(":"),j=i[0].toLowerCase(),k=i[1]?parseInt(i[1],10):0;if(!a.Sound.Enveloppe.Fixed.List[j])throw"unknown fixed enveloppe";for(b=0,c=e;c>b;b++)f[b]=a.Sound.Enveloppe.Fixed.List[j](b,c,k,this.length),h=Math.max(Math.abs(f[b]),h);break;default:for(b=0,c=e,d=this.shape.length;c>b;b++)f[b]=a.Sound.Interpolation.linear(b*d/c,this.shape),h=Math.max(Math.abs(f[b]),h)}this.normalizationRatio=h>0?1/h:1,this.processedShape=f},a.Sound.Enveloppe.Fixed.prototype.setResolution=function(a){this.resolution=a>0?a:1,this.process()},a.Sound.Enveloppe.Fixed.prototype.setLength=function(a){this.length=a>0?a:1,this.process()},a.Sound.Enveloppe.Fixed.prototype.getAmplitude=function(b,c){var d=b*this.resolution;return 0>d||d>this.length-1?0:a.Sound.Interpolation.linear(d,this.processedShape)*(c?this.normalizationRatio:1)},a.Sound.Enveloppe.Fixed.List={gaussian:function(a,b,c){c=Math.max(3,c?c:3),c=1/c;var d=Math.pow((a-(b-1)/2)/((b-1)/2*c),2)/-2;return Math.pow(Math.E,d)},gaussian2:function(a,b){return 2.5*(1/Math.sqrt(2*Math.PI))*Math.pow(Math.E,-1*Math.pow((a-b/2)*b,2)/(2*Math.pow(b*b/500*80,2)))},tukeywindow:function(a,b,c){return c=Math.max(1,c?Math.floor(c):2),c=b/(c?c:2),c/2>a?(1+Math.cos(2*Math.PI/c*(a-c/2)))/2:b-c/2>a?1:(1+Math.cos(2*Math.PI/c*(a-1+c/2)))/2},rectangularantialiased:function(a,b,c,d){c=c||Math.max(1,Math.floor(d/48));for(var e=0,f=1;c>=f;f+=2)e+=Math.sin(a*f*Math.PI/b)/f;return e},triangularantialiased:function(a,b,c,d){c=c||Math.max(1,Math.floor(d/48));for(var e=0,f=1;c>=f;f+=2)e+=Math.sin((b-a)*f*Math.PI/b)*(Math.pow(-1,(f-1)/2)/(f*f));return 8*e/(Math.PI*Math.PI)},rampupantialiased:function(a,b,c,d){c=c||Math.max(1,Math.floor(d/48));for(var e=0,f=1;c>=f;f++)e+=Math.sin((b-a)*f*Math.PI/b)/f;return 2*e/Math.PI},rampdownantialiased:function(a,b,c,d){c=c||Math.max(1,Math.floor(d/48));for(var e=0,f=1;c>=f;f++)e+=Math.sin(a*f*Math.PI/b)/f;return 2*e/Math.PI},rampup:function(a,b){return 1===b?1:a%b/(b-1)},rampdown:function(a,b){return 1===b?1:(b-a-1)%b/(b-1)},sinc:function(a,b,c){return c=Math.max(1,c?Math.floor(c):1),0===a?1:Math.sin(a/b*Math.PI*c)/(a/b*Math.PI*c)},doublesinc:function(a,b,c){c=Math.max(2,c?2*Math.floor(c):2);var d=a-b/2;return 0===d?1:Math.sin(d/b*Math.PI*c)/(d/b*Math.PI*c)},rectangular:function(){return 1},triangular:function(a,b){var c=b/2;return a>=c?a%c/c*-1+1:a%c/c},trapezoid:function(a,b){var c=b/3,d=a/c;return 1>d?d%1:d>2?1-d%1:1},rectifiedsine:function(a,b){return Math.sin(a*Math.PI/b)},expodec2:function(a,b){return(Math.exp((b-a)/b)-1)/(Math.E-1)},rexpodec2:function(a,b){return(Math.exp(a/b)-1)/(Math.E-1)},expodec:function(a,b,c){return c=Math.max(2,c?Math.floor(c):2),Math.pow(1-a/b,c)},rexpodec:function(a,b,c){return c=Math.max(2,c?Math.floor(c):2),Math.pow(a/b,c)},expopuls:function(a,b,c){return c=Math.max(2,c?Math.floor(c):2),Math.abs(Math.pow(b/2>a?a/b*2:(a-b)/b*2,c))},welchwindow:function(a,b){return 1-Math.pow((a-(b-1)/2)/((b+1)/2),2)},hannwindow:function(a,b){return(1-Math.cos(2*Math.PI*a/(b-1)))/2},linearpulse:function(b,c,d){var e=b/d;return e>=1?0:a.Sound.Interpolation.linear(e,[1,0])}},a.Sound.Enveloppe.Fixed.List.quasigaussian=a.Sound.Enveloppe.Fixed.List.tukeywindow,a.Sound.Granular.Collection=function(a,b,c){this.setSource(a),this.grainShape=b,this.position=0,this.loop=!1,this.grainLength=c,this.grainLengthVar=0,this.waveSpeed=1,this.waveSpeedVar=0,this.wavePositionOffset=0},a.Sound.Granular.Collection.prototype.setSource=function(a){this.source=a,this.start=0,this.end=this.source.length-1},a.Sound.Granular.Collection.prototype.setPosition=function(a){this.position=a%(this.end-this.start)},a.Sound.Granular.Collection.prototype.getGrainEnveloppe=function(){var b,c=(2*Math.random()-1)*this.grainLengthVar,d=Math.max(1,Math.floor(this.grainLength+c));return this.previousGrainShape!==this.grainShape||this.previousGrainLength!==d?(b=new a.Sound.Enveloppe.Fixed(this.grainShape,d),this.previousGrainEnveloppe=b,this.previousGrainShape=this.grainShape,this.previousGrainLength=d):b=this.previousGrainEnveloppe,b},a.Sound.Granular.Collection.prototype.getGrain=function(){for(var b=this.getGrainEnveloppe(),c=new Float32Array(b.length),d=this.position,e=this.waveSpeed+(2*Math.random()-1)*this.waveSpeedVar,f=0,g=b.length;g>f;f++)c[f]=b.getAmplitude(f,!0)*this.source.getSample(d,1),d+=e;return this.position+=this.grainLength*(1-this.wavePositionOffset),new a.Sound.Buffer(c)},a.Sound.Granular.Collection.prototype.source=null,a.Sound.Granular.Collection.prototype.loop=!1,a.Sound.Granular.Collection.prototype.start=0,a.Sound.Granular.Collection.prototype.end=0,a.Sound.Granular.Collection.prototype.position=0,a.Sound.Granular.Collection.prototype.grainLength=0,a.Sound.Granular.Collection.prototype.grainLengthVar=0,a.Sound.Granular.Collection.prototype.waveSpeed=0,a.Sound.Granular.Collection.prototype.waveSpeedVar=0,a.Sound.Granular.Collection.prototype.wavePositionOffset=0,a.Sound.Interpolation={preferredMode:"linear",process:function(a,b,c){return c=c&&this[c]?c:this.preferredMode,this[c](a,b)},crude:function(a,b){return 0===b.length?0:(a=Math.round(a)%b.length,0>a&&(a+=b.length),b[a])},linear:function(a,b){if(0===b.length)return 0;var c=b.length,d=Math.abs(a%c),e=Math.ceil(d),f=Math.floor(d),g=d-f;return e=e>=c?0:e,b[e]*g+b[f]*(1-g)},cosine:function(a,b){if(0===b.length)return 0;var c=b.length,d=Math.abs(a%c),e=Math.ceil(d),f=Math.floor(d),g=d-f;return e=e>=c?0:e,g=(1-Math.cos(g*Math.PI))/2,b[e]*g+b[f]*(1-g)}},a.Sound.Wavelet.Wavelet=function(a){this.polarity=a[0]>0||a[a.length-1]>0?1:-1,this.length=a.length,this.buffer=a,this.maxValue=-1;for(var b=this.buffer.length;b--;)this.maxValue=Math.max(Math.abs(this.buffer[b]),this.maxValue)},a.Sound.Wavelet.Wavelet.prototype.buffer=null,a.Sound.Wavelet.Wavelet.prototype.length=null,a.Sound.Wavelet.Wavelet.prototype.polarity=null,a.Sound.Wavelet.Wavelet.prototype.maxValue=null,a.Sound.Wavelet.Wavelet.prototype.getSample=function(b,c,d){var e=a.Sound.Interpolation.process(b,this.buffer);return e=c?e/this.maxValue:e,(1===d||-1===d)&&(e=e*d*this.polarity),e},a.Sound.Wavelet.Collection=function(a){this.setWavelets(a),this.currentPolarity=-1,this.currentWavelet=-1},a.Sound.Wavelet.Collection.prototype.wavelets=null,a.Sound.Wavelet.Collection.prototype.length=null,a.Sound.Wavelet.Collection.prototype.currentPolarity=null,a.Sound.Wavelet.Collection.prototype.currentWavelet=null,a.Sound.Wavelet.Collection.prototype.setWavelets=function(a){a.length>0?"object"!=typeof a[0]&&(a=this.processAudio(a)):a=[],this.wavelets=a,this.length=this.wavelets.length},a.Sound.Wavelet.Collection.prototype.processAudio=function(b,c){for(var d=[],e=b[0],f=0,g=null,h=1;h<b.length;h++)if(e>0&&b[h]<=0||0>=e&&b[h]>=0){if(e=b[h],g=null,g=b.subarray?b.subarray(f,h):b.slice(f,h),d.push(new a.Sound.Wavelet.Wavelet(g)),c>0&&c<=d.length)break;
	f=h}return d},a.Sound.Wavelet.Collection.prototype.get=function(a){var b=a%this.wavelets.length;return this.wavelets[b]},a.Sound.Wavelet.Collection.prototype.next=function(){var a=(this.currentWavelet+1)%this.wavelets.length,b=this.wavelets[a];return this.currentWavelet=a,b},a.Sound.Wavelet.Collection.prototype.random=function(){for(var a=-1*this.currentPolarity,b=!1,c=null,d=null;!b;)c=Math.floor(Math.random()*this.wavelets.length),c!==this.currentWavelet&&(d=this.wavelets[c],d.polarity===a&&(b=!0));return this.currentPolarity=d.polarity,this.currentWavelet=c,d},a.Utils.Buffer=function(a){var b,c;if("string"==typeof a)for(this.view=new Uint8Array(a.length),b=0,c=a.length;c>b;b++)this.view[b]=a.charCodeAt(b)%256;else if("[object Array]"===Object.prototype.toString.call(a))for(this.view=new Uint8Array(a.length),b=0,c=a.length;c>b;b++)this.view[b]=a[b]%256;else this.view=new Uint8Array(a)},a.Utils.Buffer.prototype.view=null,a.Utils.Buffer.prototype.writeVLQ=function(a,b){var c=[];for(c.push(127&b);b>>=7;)c.push(127&b|128);for(var d=0,e=c.length;e>d;d++)this.writeByte(a+e-d-1,c[d])},a.Utils.Buffer.prototype.readVLQ=function(a){var b=this.readByte(a),c=null,d=a;if(128&b){b&=127;do d++,c=this.readByte(d),isNaN(c)||(b=(b<<7)+(127&c));while(128&c)}return b},a.Utils.Buffer.prototype.readBit=function(a){var b=Math.floor(a/8),c=Math.pow(2,7-a%8);return this.view[b]&c?1:0},a.Utils.Buffer.prototype.writeBit=function(a,b){var c,d=Math.floor(a/8);b>0?(c=Math.pow(2,7-a%8),this.view[d]|=c):(c=255-Math.pow(2,7-a%8),this.view[d]&=c)},a.Utils.Buffer.prototype.toggleBit=function(a){var b=Math.floor(a/8);this.view[b]^=Math.pow(2,7-a%8)},a.Utils.Buffer.prototype.readByte=function(a){var b=null;return this.view.length>a&&(b=this.view[a]),b},a.Utils.Buffer.prototype.writeByte=function(a,b){this.view[a]=b%256},a.Utils.Buffer.prototype.readUint8=function(a){return this.readByte(a)},a.Utils.Buffer.prototype.writeUint8=function(a,b){this.writeByte(a,b)},a.Utils.Buffer.prototype.readUint16=function(a){return this.readInteger(a,2,8)},a.Utils.Buffer.prototype.writeUint16=function(a,b){return this.writeInteger(a,b,2,8)},a.Utils.Buffer.prototype.readUint24=function(a){return this.readInteger(a,3,8)},a.Utils.Buffer.prototype.writeUint24=function(a,b){return this.writeInteger(a,b,3,8)},a.Utils.Buffer.prototype.readUint32=function(a){return this.readInteger(a,4,8)},a.Utils.Buffer.prototype.writeUint32=function(a,b){return this.writeInteger(a,b,4,8)},a.Utils.Buffer.prototype.readInteger=function(a,b,c,d){var e=0;c=c||8;for(var f=Math.pow(2,c)-1,g=null,h=0,i=a,j=a+b;j>i;h++,i++)g=d?Math.pow(2,c*h):Math.pow(2,c*(b-h-1)),e+=(this.readByte(i)&f)*g;return e},a.Utils.Buffer.prototype.writeInteger=function(a,b,c,d,e){d=d||8;for(var f=Math.pow(2,d)-1,g=0;c>g;g++)this.writeByte(e?a+g:a+c-g-1,b&f),b>>=d},a.Utils.Buffer.prototype.readString=function(a,b,c){for(var d="",e=null,f=Math.min(a+b,this.view.length),g=a;f>g;g++)e=this.view[g],(!c||10!==e&&13!==e)&&(d+=String.fromCharCode(e));return d},a.Utils.Buffer.prototype.writeString=function(a,b){for(var c=0;c<b.length;c++)this.view[a+c]=b.charCodeAt(c)%256},a.Utils.Buffer.prototype.getLength=function(){return this.view.length},a.Utils.Buffer.prototype.toString=function(){return this.readString(0,this.view.length,!1)},a.Utils.Buffer.prototype.dump=function(a,b){a=a||0,b=b||this.view.length;var c,d=Math.min(a+b,this.view.length),e="*0 *1 *2 *3     *4 *5 *6 *7     *8 *9 *A *B     *C *D *E *F\n";e+="-----------------------------------------------------------\n";var f=null,g=a%16;for(c=0;g>c;c++)e+=".. ",(c+1)%4===0&&(e+="    ");for(c=a;d>c;c++)f=this.readByte(c).toString(16),f.length<2&&(f="0"+f),e+=f+" ",(c+1)%4===0&&(e+="    "),(c+1)%16===0&&(e+="\n");return e},a.Utils.Buffer.prototype.dumpBinary=function(a,b){a=a||0,b=b||this.view.length;var c,d,e=Math.min(a+b,this.view.length),f="*******0 *******1 ******10 ******11 *****100 *****101 *****110 *****111\n";f+="-----------------------------------------------------------------------\n";var g=null,h=a%8;for(c=0;h>c;c++)f+="........ ";for(c=a;e>c;c++){for(g=this.readByte(c).toString(2),d=8-g.length;d--;)g="0"+g;f+=g+" ",(c+1)%8===0&&(f+="\n")}return f},a.Utils.Math={rms:function(a){var b=0;if(a&&a.length>0){for(var c=0;c<a.length;c++)b+=a[c]*a[c];b=this.sqrt(b/a.length)}return b},amean:function(a){var b=0;if(a&&a.length>0){for(var c=0;c<a.length;c++)b+=a[c];b/=a.length}return b},gmean:function(a){var b=0;if(a&&a.length>0){b=1;for(var c=0;c<a.length;c++)b*=a[c];b=this.pow(b,1/a.length)}return b},hmean:function(a){var b=null;if(a&&a.length>0){b=0;for(var c=0;c<a.length;c++)b+=1/a[c];b=a.length/b}return b},sum:function(a){var b=0;if(a&&a.length>0)for(var c=0;c<a.length;c++)b+=a[c];return b},median:function(a){var b=0;if(a&&a.length>0){var c=this.floor(a.length/2);a=a.slice(0),b=a.length%2?a[c]:(a[c-1]+a[c])/2}return b},lerp:function(a,b,c){return(b-a)*c+a},limit:function(a,b,c){if(b>c){var d=c;c=b,b=d}return this.max(this.min(a,c),b)},scale:function(a,b,c,d,e){return a=c===b?0:(this.limit(a,b,c)-b)/(c-b),a*(e-d)+d}},a.Utils.Midi.File=function(a){a&&this.readBuffer(a)},a.Utils.Midi.File.prototype.buffer=null,a.Utils.Midi.File.prototype.format=null,a.Utils.Midi.File.prototype.trackNumber=null,a.Utils.Midi.File.prototype.fps=null,a.Utils.Midi.File.prototype.tracks=null,a.Utils.Midi.File.prototype.readBuffer=function(b){var c=0;this.buffer=new a.Utils.Buffer(b),console.log(this.buffer.dump()),this.tracks=[],c=this.readFileHeader(c),console.log(" * correct header : trackNumber "+this.trackNumber+" format "+this.format+" fps "+this.fps);for(var d=0;d<this.trackNumber;d++)c=this.readTrack(c,d)},a.Utils.Midi.File.prototype.readTrack=function(b,c){var d=this.buffer,e=[];if("MTrk"!==d.readString(b,4))throw"incorrect header track "+c;console.log(" * correct header track "+c);var f=d.readByte(b+4)*Math.pow(256,3)+d.readByte(b+5)*Math.pow(256,2)+256*d.readByte(b+6)+d.readByte(b+7);console.log(" * track length "+f),b+=8;for(var g=b,h=[],i=null;f+g>b;){if(i=d.readByte(b),h.push(i),0===i){for(var j="",k=0,l=h.length;l>k;k++)j+=h[k].toString(16)+" ";if(console.log("cmd : "+j),255===h[0])switch(h[1]){case 0:console.log(" * sequence number");break;case 1:console.log(" * meta text",d.readString(b+3,h.length-1,!0));break;case 2:console.log(" * meta copyright",d.readString(b+3,h.length-1,!0));break;case 3:console.log(" * meta sequence label",d.readString(b+3,h.length-1,!0));break;case 4:console.log(" * meta instrument name",d.readString(b+3,h.length-1,!0));break;case 5:console.log(" * meta lyric",d.readString(b+3,h.length-1,!0));break;case 6:console.log(" * meta marker",d.readString(b+3,h.length-1,!0));break;case 7:console.log(" * meta cue point",d.readString(b+3,h.length-1,!0));break;case 47:console.log(" * end of track");break;case 81:var m=h[3],n=h[4],o=h[5];console.log(" * tempo",m,n,o);break;case 84:console.log(" * SMPTE offset (currently ignored)");break;case 88:var m=h[3],n=h[4],o=h[5],p=h[6];console.log(" * time signature",m,n,o,p);break;case 89:var m=h[3],n=h[4];console.log(" * key signature",m,n);break;case 127:console.log(" * sequencer specific meta (currently ignored)")}else if(h[0]>=128&&h[0]<=143){var q=1+h[0]-128,r=h[1],s=h[2];console.log(" * note off","channel "+q+" note "+r+" velocity "+s)}else if(h[0]>=144&&h[0]<=159){var q=1+h[0]-144,r=h[1],s=h[2];console.log(" * note on","channel "+q+" note "+r+" velocity "+s)}else if(h[0]>=160&&h[0]<=175){var q=1+h[0]-160,r=h[1],t=h[2];console.log(" * polyphonic aftertouch","channel "+q+" note "+r+" pressure "+t)}else if(h[0]>=176&&h[0]<=191){var q=1+h[0]-176,u=h[1],v=a.Utils.Midi.ControlChangesDictionary.getName(u),t=h[2];console.log(" * control change","channel "+q+" cc "+u+"("+(v?v:"unknown")+") value "+t)}else if(h[0]>=192&&h[0]<=207){var q=1+h[0]-192,w=h[1];console.log(" * program change","channel "+q+" program "+w)}else if(h[0]>=208&&h[0]<=223){{var q=1+h[0]-208;h[1]}console.log(" * channel aftertouch","channel "+q+" pressure "+t)}else if(h[0]>=224&&h[0]<=239){var q=1+h[0]-224,x=h[1],y=h[2],t=x+128*y;console.log(" * pitch wheel change","channel "+q+" lsb "+x+" msb "+y+" value "+t)}h=[]}b++}return this.tracks.push(e),b},a.Utils.Midi.File.prototype.readFileHeader=function(a){var b=this.buffer;if("MThd"!==b.readString(a,4)||0!==b.readByte(a+4)||0!==b.readByte(a+5)||0!==b.readByte(a+6)||6!==b.readByte(a+7))throw console.log("e1"),"incorrect header file";if(this.format=b.readByte(a+9),this.trackNumber=b.readByte(a+11),this.fps=b.readByte(a+13),this.format>1)throw console.log("e2"),"unsupported format : "+this.format;if(this.trackNumber<1||0===this.format&&this.trackNumber>1)throw console.log("e3"),"incorrect track number";return a+14},a.Utils.Midi.ControlChangesDictionary={dictionary:{0:{label:"bank select",shortname:"bank"},1:{label:"modulation wheel",shortname:"mod"},2:{label:"breath controller",shortname:"breath"},4:{label:"foot controller",shortname:"foot"},5:{label:"portamento time",shortname:"portamento"},6:{label:"data entry msb"},7:{label:"channel volume",shortname:"volume"},8:{label:"balance"},10:{label:"pan"},11:{label:"expression controller",shortname:"expression"},12:{label:"effect control 1",shortname:"fx1"},13:{label:"effect control 2",shortname:"fx2"},16:{label:"general purpose controller 1"},17:{label:"general purpose controller 2"},18:{label:"general purpose controller 3"},19:{label:"general purpose controller 4"},65:{label:"portamento on/off"},66:{label:"sostenuto on/off"},67:{label:"soft pedal on/off"},68:{label:"legato footswitch"},69:{label:"hold 2"},70:{label:"sound controller 1"},71:{label:"sound controller 2"},72:{label:"sound controller 3"},73:{label:"sound controller 4"},74:{label:"sound controller 5"},75:{label:"sound controller 6"},76:{label:"sound controller 7"},77:{label:"sound controller 8"},78:{label:"sound controller 9"},79:{label:"sound controller 10"},80:{label:"general purpose controller 5"},81:{label:"general purpose controller 6"},82:{label:"general purpose controller 7"},83:{label:"general purpose controller 8"},84:{label:"portamento control"},91:{label:"effects 1 depth",shortname:"fx1 depth"},92:{label:"effects 2 depth",shortname:"fx2 depth"},93:{label:"effects 3 depth",shortname:"fx3 depth"},94:{label:"effects 4 depth",shortname:"fx4 depth"},95:{label:"effects 5 depth",shortname:"fx5 depth"},120:{label:"all sound off"},121:{label:"reset all controllers"},122:{label:"local control on/off"},123:{label:"all notes off",shortname:"panic"},126:{label:"mono mode on",shortname:"mono"},127:{label:"poly mode on",shortname:"poly"}},reverseDictionary:{},getName:function(a){return this.dictionary[a]&&this.dictionary[a].label?this.dictionary[a].label:null},get:function(a){return this.dictionary[a]?this.dictionary[a]:null},getCC:function(a){return this.reverseDictionary[a]?this.reverseDictionary[a]:null},buildReverseDictionary:function(){var a=null,b={};for(var c in this.dictionary)this.dictionary.hasOwnProperty(c)&&(a=this.dictionary[c],c=parseInt(c,10),null!==a&&(a.label&&(b[a.label]=c),a.shortname&&(b[a.shortname]=c)));this.reverseDictionary=b}},a.Utils.Midi.ControlChangesDictionary.buildReverseDictionary(),delete a.Utils.Midi.ControlChangesDictionary.buildReverseDictionary,a.Utils.MML.File=function(a){this.voices=[],a&&this.parseString(a)},a.Utils.MML.File.prototype.voices=null,a.Utils.MML.File.prototype.getVoiceCount=function(){return this.voices.length},a.Utils.MML.File.prototype.getPhrase=function(b){var c,d,e;if(null===b||"undefined"==typeof b)for(c=new a.Music.Phrase(0,!0),d=0,e=this.voices.length;e>d;d++){var f=this.getPhrase(d);c.add(f)}else if(this.voices[b]){c=new a.Music.Phrase(0,!0);var g=0;for(d=0,e=this.voices[b].length;e>d;d++){var h=this.voices[b][d],i=10;null!==h.note&&c.addNoteEvent(h.note.midi,g,i,{detune:h.note.cents,pan:h.panning,velocity:h.velocity}),g+=i}}return c},a.Utils.MML.File.prototype.parseString=function(b){this.voices=[],b=b.replace(/(\/\/.*([\r\n]+|$))/gi,""),b=b.replace(/[\r\n]/gi,"").replace(/(\/\*.*\*\/)/gi,"");for(var c=b.replace(/[^0-9a-z><#+-;]/gi,"").split(";"),d=0,e=c.length;e>d;d++){for(var f=c[d]+";",g=[],h=[],i=null,j=120,k=4,l=4,m=16,n=6,o=4,p=0,q=0,r=0,s=f.length;s>r;r++){if(i=f[r],i&&i.match(/[a-z<>;()]/i)&&g.length>0&&("t"!==i||1!==g.length||"k"!==g[0])){switch(g[0]){case">":k+=Math.max(1,parseInt(g.slice(1).join(""),10));break;case"<":k-=Math.max(1,parseInt(g.slice(1).join(""),10));break;case"o":k=parseInt(g.slice(1).join(""),10);break;case")":m+=Math.max(1,parseInt(g.slice(1).join(""),10));break;case"(":m-=Math.max(1,parseInt(g.slice(1).join(""),10));break;case"l":l=parseInt(g.slice(1).join(""),10);break;case"v":m=parseInt(g.slice(1).join(""),10);break;case"q":n=parseInt(g.slice(1).join(""),10);break;case"p":o=parseInt(g.slice(1).join(""),10);break;case"t":j=parseInt(g.slice(1).join(""),10);break;case"k":"t"===g[1]?q=parseInt(g.slice(2).join(""),10):p=parseInt(g.slice(1).join(""),10)/6400;break;case"a":case"b":case"c":case"d":case"e":case"f":case"g":var t=g[0];"#"===g[1]||"+"===g[1]?t=g[0]+"#":"-"===g[1]&&(t=g[0]+"b"),t=a.Music.Note.getMidiFromLabel(t.toUpperCase(),k),t=a.Music.Note.createFromMidi(t+q,p),h.push({note:t,panning:o,length:l,tempo:j,quantize:n,velocity:m});break;case"r":h.push({note:null,panning:o,length:l,tempo:j,quantize:n,velocity:m})}g=[]}g.push(i)}h.length>0&&this.voices.push(h)}},a.Utils.Scala.File=function(a){this.description="",this.numberIntervals=0,this.intervals=[],a&&this.parse(a)},a.Utils.Scala.File.prototype.description=null,a.Utils.Scala.File.prototype.numberIntervals=null,a.Utils.Scala.File.prototype.intervals=null,a.Utils.Scala.File.prototype.parse=function(a){var b,c,d,e=(a+"\r\n").match(/^.*[\n\r]+|$/gm),f=0;this.intervals=[];for(var g=0;g<e.length;g++)if(b=e[g],0!==b.indexOf("!")){switch(f){case 0:this.description=b.trim();break;case 1:this.numberIntervals=parseInt(b,10);break;default:c=b.trim(),""!==c&&(d=this.treatInterval(c),isNaN(d)||this.intervals.push(d))}f++}if(this.intervals.length!==this.numberIntervals)throw"Error in file format : incorrect number of valid intervals"},a.Utils.Scala.File.prototype.treatInterval=function(a){var b,c=!1;if(a=a.split(" ")[0],a.indexOf("/")>0){var d=a.split("/");b=parseFloat(d[0])/parseFloat(d[1])}else a.indexOf(".")>0?(b=parseFloat(a),c=!0):b=parseFloat(a);if(!c){if(0>b)throw"Error in file format : negative ratio as interval";b=1200*Math.log(b)/Math.log(2)}return b},a.Utils.Sfz.Region=function(){this.innerSequence=0},a.Utils.Sfz.Region.prototype.audioBuffer=null,a.Utils.Sfz.Region.prototype.innerSequence=0,a.Utils.Sfz.Region.prototype.sample=null,a.Utils.Sfz.Region.prototype.volume=0,a.Utils.Sfz.Region.prototype.pan=0,a.Utils.Sfz.Region.prototype.transpose=0,a.Utils.Sfz.Region.prototype.tune=0,a.Utils.Sfz.Region.prototype.pitchKeyCenter=60,a.Utils.Sfz.Region.prototype.pitchKeyTrack=100,a.Utils.Sfz.Region.prototype.pitchRandom=0,a.Utils.Sfz.Region.prototype.loChannel=0,a.Utils.Sfz.Region.prototype.hiChannel=16,a.Utils.Sfz.Region.prototype.loKey=0,a.Utils.Sfz.Region.prototype.hiKey=127,a.Utils.Sfz.Region.prototype.loRand=0,a.Utils.Sfz.Region.prototype.hiRand=1,a.Utils.Sfz.Region.prototype.loVelocity=0,a.Utils.Sfz.Region.prototype.hiVelocity=127,a.Utils.Sfz.Region.prototype.loBpm=0,a.Utils.Sfz.Region.prototype.hiBpm=500,a.Utils.Sfz.Region.prototype.sequenceLength=1,a.Utils.Sfz.Region.prototype.sequencePosition=1,a.Utils.Sfz.Region.prototype.offset=0,a.Utils.Sfz.Region.prototype.offsetRandom=0,a.Utils.Sfz.Region.prototype.end=0,a.Utils.Sfz.Region.prototype.switchLast=0,a.Utils.Sfz.Region.prototype.switchLoKey=0,a.Utils.Sfz.Region.prototype.switchHiKey=127,a.Utils.Sfz.Region.prototype.switchDown=0,a.Utils.Sfz.Region.prototype.switchUp=0,a.Utils.Sfz.Region.prototype.switchPrevious=null,a.Utils.Sfz.Region.prototype.setProperties=function(a){for(var b in a)a.hasOwnProperty(b)&&this.setProperty(b,a[b])},a.Utils.Sfz.Region.prototype.setProperty=function(b,c){switch(b){case"sample":this.sample=c;break;case"lochan":this.loChannel=Math.min(16,Math.max(0,parseInt(c,10)));break;case"hichan":this.hiChannel=Math.min(16,Math.max(0,parseInt(c,10)));break;case"key":this.setProperty("lokey",parseInt(c,10)),this.setProperty("hikey",parseInt(c,10)),this.setProperty("picth_keycenter",parseInt(c,10));break;case"lokey":c="string"!=typeof c||/^[0-9]+$/.test(c)?parseInt(c,10):a.Music.Note.getMidiFromLabel(c),this.loKey=Math.min(127,Math.max(0,c));break;case"hikey":c="string"!=typeof c||/^[0-9]+$/.test(c)?parseInt(c,10):a.Music.Note.getMidiFromLabel(c),this.hiKey=Math.min(127,Math.max(0,c));break;case"lovel":this.loVelocity=Math.min(127,Math.max(0,parseInt(c,10)));break;case"hivel":this.hiVelocity=Math.min(127,Math.max(0,parseInt(c,10)));break;case"lorand":this.loRand=Math.min(1,Math.max(0,parseFloat(c)));break;case"hirand":this.hiRand=Math.min(1,Math.max(0,parseFloat(c)));break;case"lobpm":this.loBpm=Math.min(500,Math.max(0,parseFloat(c)));break;case"hibpm":this.hiBpm=Math.min(500,Math.max(0,parseFloat(c)));break;case"seq_length":this.sequenceLength=Math.min(100,Math.max(1,parseInt(c,10)));break;case"seq_position":this.sequencePosition=Math.min(100,Math.max(1,parseInt(c,10)));break;case"volume":this.volume=Math.min(6,Math.max(-144,parseFloat(c)));break;case"pan":this.pan=Math.min(100,Math.max(-100,parseFloat(c)));break;case"offset":this.offset=Math.max(0,parseInt(c,10));break;case"offset_random":this.offsetRandom=parseInt(c,10);break;case"end":this.end=Math.max(-1,parseInt(c,10));break;case"transpose":this.transpose=Math.min(127,Math.max(-127,parseInt(c,10)));break;case"tune":this.tune=Math.min(100,Math.max(1,parseInt(c,10)));break;case"pitch_keycenter":c="string"!=typeof c||/^[0-9]+$/.test(c)?parseInt(c,10):a.Music.Note.getMidiFromLabel(c),this.pitchKeyCenter=Math.min(127,Math.max(0,c));break;case"pitch_keytrack":this.pitchKeyTrack=Math.min(1200,Math.max(-1200,parseInt(c,10)));break;case"pitch_random":this.pitchRandom=Math.min(9600,Math.max(0,parseInt(c,10)));break;case"sw_last":c="string"!=typeof c||/^[0-9]+$/.test(c)?parseInt(c,10):a.Music.Note.getMidiFromLabel(c),this.switchLast=Math.min(127,Math.max(0,c));break;case"sw_lokey":c="string"!=typeof c||/^[0-9]+$/.test(c)?parseInt(c,10):a.Music.Note.getMidiFromLabel(c),this.switchLoKey=Math.min(127,Math.max(0,c));break;case"sw_hikey":c="string"!=typeof c||/^[0-9]+$/.test(c)?parseInt(c,10):a.Music.Note.getMidiFromLabel(c),this.switchHiKey=Math.min(127,Math.max(0,c));break;case"sw_down":c="string"!=typeof c||/^[0-9]+$/.test(c)?parseInt(c,10):a.Music.Note.getMidiFromLabel(c),this.switchDown=Math.min(127,Math.max(0,c));break;case"sw_up":c="string"!=typeof c||/^[0-9]+$/.test(c)?parseInt(c,10):a.Music.Note.getMidiFromLabel(c),this.switchUp=Math.min(127,Math.max(0,c));break;case"sw_previous":c="string"!=typeof c||/^[0-9]+$/.test(c)?parseInt(c,10):a.Music.Note.getMidiFromLabel(c),this.switchPrevious=parseInt(c,10)}},a.Utils.Sfz.Region.prototype.matchNote=function(a,b,c,d,e,f){return this.innerSequence++,this.innerSequence>this.sequenceLength&&(this.innerSequence=1),a>=this.loChannel&&a<=this.hiChannel&&b>=this.loKey&&b<=this.hiKey&&d>=this.loVelocity&&d<=this.hiVelocity&&this.innerSequence===this.sequencePosition&&f>=this.loRand&&f<=this.hiRand&&e>=this.loBpm&&e<=this.hiBpm},a.Utils.Sfz.File=function(){this.regions=[]},a.Utils.Sfz.File.prototype.regions=null,a.Utils.Sfz.File.prototype.addRegion=function(b,c){if(b.sample||c.sample){var d=new a.Utils.Sfz.Region;d.setProperties(b),d.setProperties(c),this.regions.push(d)}},a.Utils.Sfz.File.prototype.parse=function(a){var b=a.split(/(<group>|<region>)/i),c={},d={},e=!1,f=!1;this.regions=[];for(var g=0,h=b.length;h>g;g++){var i=b[g];if("<group>"!==i)if("<region>"!==i){if(e||f){for(var j=i.split(/[\r\n]/),k={},l=0,m=j.length;m>l;l++){var n=j[l];n=n.split("//")[0];for(var o=null,p=/([a-zA-Z-_]*)=([^=]*)(?![a-zA-Z-_]*=)/g;null!==(o=p.exec(n));)k[o[1].trim()]=o[2].trim()}e?c=k:d=k}f&&this.addRegion(c,d)}else e=!1,f=!0,d={};else e=!0,f=!1,c={}}},a.Utils.Sfz.File.loadFromString=function(b){var c=new a.Utils.Sfz.File;return c.parse(b),c},a.Utils.Support={},a.Utils.Support.audioContextClass=null,a.Utils.Support.offlineAudioContextClass=null,a.Utils.Support.audioContextCollection={},window.AudioContext?a.Utils.Support.audioContextClass=window.AudioContext:window.webkitAudioContext?a.Utils.Support.audioContextClass=window.webkitAudioContext:window.mozAudioContext&&(a.Utils.Support.audioContextClass=window.mozAudioContext),window.OfflineAudioContext?a.Utils.Support.offlineAudioContextClass=window.OfflineAudioContext:window.webkitOfflineAudioContext?a.Utils.Support.offlineAudioContextClass=window.webkitOfflineAudioContext:window.mozOfflineAudioContext&&(a.Utils.Support.offlineAudioContextClass=window.mozOfflineAudioContext),a.Utils.Support.isAudioContextSupported=function(){return null!==this.audioContextClass},a.Utils.Support.getAudioContext=function(a){var b=null;return this.isAudioContextSupported()&&(a=a||"global",this.audioContextCollection[a]?b=this.audioContextCollection[a]:(b=new this.audioContextClass,this.audioContextCollection[a]=b)),b},a.Utils.Support.isOfflineAudioContextSupported=function(){return null!==this.offlineAudioContextClass},a.Utils.Support.getOfflineAudioContext=function(a,b,c){var d=null;return this.isOfflineAudioContextSupported()&&(a=Math.min(1,parseInt(a,10)),c=c||this.getSampleRate(),d=new this.offlineAudioContextClass(a,b,c)),d},a.Utils.Support.isArrayBufferAndTypedArraySupported=function(){for(var a=["ArrayBuffer","Uint8Array","Int8Array","Uint16Array","Int16Array","Uint32Array","Int32Array","Float16Array","Float32Array"],b=!0,c=a.length;c--&&b;)b&=!!window[a[c]];return b},a.Utils.Support.getSampleRate=function(){return this.getAudioContext().sampleRate},a.Utils.Support.getNyquistFrenquency=function(){return this.getAudioContext().sampleRate/2},a.Utils.XHR={preferredMode:"serial",multiLoad:function(b,c,d,e){"serial"===a.Utils.XHR.preferredMode?this.serialLoad(b,c,d,e):this.parallelLoad(b,c,d,e)},serialLoad:function(b,c,d,e){var f=0,g=function(a){c&&c(a,b[f].id,b[f].url),b[f].data=a,b[f].error=!1,f++,f<b.length?h():d&&d(b)},h=function(){var c=b[f].url,d=b[f].type;a.Utils.XHR.load(c,d,g,e)};b.length>0?h():d&&d(b)},parallelLoad:function(b,c,d,e){var f=0,g=!1,h=function(b,h){var i=b[h];a.Utils.XHR.load(i.url,i.type,function(a){g||(c&&c(a,i.id,i.url),b[h].data=a,b[h].error=!1,f++,f===b.length&&d&&d(b))},function(a){g=!0,e&&e(a)})};if(b.length>0)for(var i=0,j=b.length;j>i;i++)h(b,i);else d&&d(b)},load:function(b,c,d,e){var f=new XMLHttpRequest;switch(f.open("GET",b,!0),c){case"sfz":f.onload=function(){var b=a.Utils.Sfz.File.loadFromString(f.response);d&&d(b)},f.onerror=function(){e&&e(f)},f.send();break;case"mml":f.onload=function(){var b=new a.Utils.MML.File(f.response);d&&d(b)},f.onerror=function(){e&&e(f)},f.send();break;case"scala":f.onload=function(){try{var b=new a.Utils.Scala.File(f.response);d&&d(b)}catch(c){e&&e(f)}},f.onerror=function(){e&&e(f)},f.send();break;case"midi":f.responseType="arraybuffer",f.onload=function(){try{var b=new a.Utils.Midi.File(f.response);d&&d(b)}catch(c){e&&e(f)}},f.onerror=function(){e&&e(f)},f.send();break;case"audio":f.responseType="arraybuffer",f.onload=function(){a.Utils.XHR.decodeAudio(f.response,d,e)},f.onerror=function(){e&&e(f)},f.send();break;case"array":f.responseType="arraybuffer",f.onload=function(){d&&d(f.response)},f.onerror=function(){e&&e(f)},f.send();break;case"buffer":f.responseType="arraybuffer",f.onload=function(){var b=function(b){var c=new a.Sound.Buffer(b);d&&d(c)};a.Utils.XHR.decodeAudio(f.response,b,e)},f.onerror=function(){e&&e(f)},f.send();break;default:f.onload=function(){d&&d(f.response)},f.onerror=function(){e&&e(f)},f.send()}},decodeAudio:function(b,c,d){var e=a.Utils.Support.getAudioContext();e.decodeAudioData(b,c,d)}},a.Music.ChordList.addDirectShortnameTranslation("","M"),a.Music.ChordList.addDirectShortnameTranslation("","o"),a.Music.ChordList.addDirectShortnameTranslation("",""),a.Music.ChordList.addChord([0,7],"5","power chord"),a.Music.ChordList.addChord([0,6],"4+","tritone"),a.Music.ChordList.addChord([0,4,3],["","M","maj"],"major"),a.Music.ChordList.addChord([0,3,4],["m","min","-"],"minor"),a.Music.ChordList.addChord([0,3,3],["dim","o","mb5"],"diminished"),a.Music.ChordList.addChord([0,4,4],["aug","+","M#5","M+5"],"augmented"),a.Music.ChordList.addChord([0,4,2],"Mb5","major flat five"),a.Music.ChordList.addChord([0,2,5],"sus2","suspended second"),a.Music.ChordList.addChord([0,5,2],"sus4","suspended fourth"),a.Music.ChordList.addChord([0,5,3],"augsus4","suspended fourth"),a.Music.ChordList.addChord([0,4,3,3],["7","dom7"],"dominant seventh"),a.Music.ChordList.addChord([0,4,3,4],["M7","maj7"],"major seventh"),a.Music.ChordList.addChord([0,3,4,3],["m7","min7","-7"],"minor seventh"),a.Music.ChordList.addChord([0,3,3,3],["dim7","o7"],"diminished seventh"),a.Music.ChordList.addChord([0,3,3,4],["m7b5","7"],"half-diminished seventh"),a.Music.ChordList.addChord([0,3,4,4],["mM7","-M7","minmaj7"],"minor major seventh"),a.Music.ChordList.addChord([0,4,4,2],["7#5","7+5","aug7","+7"],"augmented seventh"),a.Music.ChordList.addChord([0,4,4,3],["M7#5","augmaj7","+M7"],"augmented major seventh"),a.Music.ChordList.addChord([0,4,2,4],["7b5","dom7dim5"],"seventh flat five"),a.Music.ChordList.addChord([0,4,3,3,4],["9","dom9"],"dominant ninth"),a.Music.ChordList.addChord([0,4,3,4,3],["M9","maj9"],"major ninth"),a.Music.ChordList.addChord([0,3,4,4,3],["mM9","-M9","minmaj9"],"minor major ninth"),a.Music.ChordList.addChord([0,3,4,3,4],["m9","-9","min9"],"minor dominant ninth"),a.Music.ChordList.addChord([0,4,4,3,3],["augM9","+M9"],"augmented major ninth"),a.Music.ChordList.addChord([0,4,4,2,4],["aug9","+9"],"augmented dominant ninth"),a.Music.ChordList.addChord([0,3,3,3,5],["dim9","o9"],"diminished ninth"),a.Music.ChordList.addChord([0,3,3,3,4],["dimb9","ob9"],"diminished minor ninth"),a.Music.ChordList.addChord([0,3,3,4,4],["m9b5","9"],"half diminished ninth"),a.Music.ChordList.addChord([0,3,3,4,3],["m9b5b9","b9"],"half diminished minor ninth"),a.Music.IntervalList.addInterval(0,["unison","perfect prime","perfect unison"]),a.Music.IntervalList.addInterval(1,["cent"]),a.Music.IntervalList.addInterval(100,["semitone"]),a.Music.IntervalList.addInterval(1200,["octave"]),a.Music.IntervalList.addInterval(2400,["double octave"]),a.Music.IntervalList.addInterval(100,["equal-tempered minor second"]),a.Music.IntervalList.addInterval(150,["equal-tempered neutral second"]),a.Music.IntervalList.addInterval(200,["equal-tempered major second"]),a.Music.IntervalList.addInterval(300,["equal-tempered minor third"]),a.Music.IntervalList.addInterval(350,["equal-tempered neutral third"]),a.Music.IntervalList.addInterval(400,["equal-tempered major third"]),a.Music.IntervalList.addInterval(500,["equal-tempered perfect fourth"]),a.Music.IntervalList.addInterval(550,["equal-tempered major fourth"]),a.Music.IntervalList.addInterval(600,["equal-tempered tritone"]),a.Music.IntervalList.addInterval(650,["equal-tempered minor fifth"]),a.Music.IntervalList.addInterval(700,["equal-tempered perfect fifth"]),a.Music.IntervalList.addInterval(800,["equal-tempered minor sixth"]),a.Music.IntervalList.addInterval(850,["equal-tempered neutral sixth"]),a.Music.IntervalList.addInterval(900,["equal-tempered major sixth"]),a.Music.IntervalList.addInterval(1e3,["equal-tempered minor seventh"]),a.Music.IntervalList.addInterval(1050,["equal-tempered neutral seventh"]),a.Music.IntervalList.addInterval(1100,["equal-tempered major seventh"]),a.Music.IntervalList.addInterval(1300,["equal-tempered minor ninth"]),a.Music.IntervalList.addInterval(1400,["equal-tempered major ninth"]),a.Music.IntervalList.addInterval(1500,["equal-tempered minor tenth"]),a.Music.IntervalList.addInterval(1600,["equal-tempered major tenth"]),a.Music.IntervalList.addInterval(1700,["equal-tempered perfect eleventh"]),a.Music.IntervalList.addInterval(1800,["equal-tempered augmented eleventh"]),a.Music.IntervalList.addInterval(1900,["equal-tempered perfect twelfth"]),a.Music.IntervalList.addInterval(2e3,["equal-tempered minor thirteenth"]),a.Music.IntervalList.addInterval(2100,["equal-tempered major thirteenth"]),a.Music.IntervalList.addInterval(2200,["equal-tempered minor fourteenth"]),a.Music.IntervalList.addInterval(2300,["equal-tempered major fourteenth"]),a.Music.IntervalList.addInterval(21.51,["syntonic comma","ptolemaic comma","diatonic comma","chromatic diesis"]),a.Music.IntervalList.addInterval(1200/72,["72tet step","seventy-two equal temperament step"]),a.Music.IntervalList.addInterval(1200/53,["53tet step","fifty-three equal temperament step","holdrian comma","arabian comma"]),a.Music.IntervalList.addInterval(1200/41,["41tet step","forty-one equal temperament step"]),a.Music.IntervalList.addInterval(1200/31,["31tet step","thirty-one equal temperament step"]),a.Music.IntervalList.addInterval(100,["12tet step","twelve equal temperament step"]),a.Music.IntervalList.addInterval(1200/7,["7tet step","seven equal temperament step"]),a.Music.IntervalList.addInterval(240,["5tet step","five equal temperament step"]),a.Music.IntervalList.addInterval(50,["quarter tone","24tet step","twenty-four equal temperament step"]),a.Music.IntervalList.addInterval(35.1,["gamma scale step"]),a.Music.IntervalList.addInterval(63.8,["beta scale step"]),a.Music.IntervalList.addInterval(78,["alpha scale step"]),a.Music.IntervalList.addInterval(833.09,["golden ratio"]),a.Music.ScaleList.addScale([2,1,2,1,2,1,2,1],["diminished"]),a.Music.ScaleList.addScale([2,2,1,2,1,1,2,1],["major bebop"]),a.Music.ScaleList.addScale([2,2,1,2,2,1,1,1],["dominant bebop"]),a.Music.ScaleList.addScale([2,1,1,1,2,2,1,2],["minor bebop"]),a.Music.ScaleList.addScale([2,1,2,2,1,2,2],["aeolian","natural minor","minor"]),a.Music.ScaleList.addScale([1,2,2,1,2,2,2],["locrian"]),a.Music.ScaleList.addScale([2,2,1,2,2,2,1],["ionian","major"]),a.Music.ScaleList.addScale([2,1,2,2,2,1,2],["dorian"]),a.Music.ScaleList.addScale([1,2,2,2,1,2,2],["phrygian"]),a.Music.ScaleList.addScale([2,2,2,1,2,2,1],["lydian"]),a.Music.ScaleList.addScale([2,2,1,2,2,1,2],["mixolydian","moloch"]),a.Music.ScaleList.addScale([2,1,2,2,1,3,1],["harmonic minor"]),a.Music.ScaleList.addScale([2,1,3,1,2,1,2],["ukrainian minor","altered dorian","misheberak"]),a.Music.ScaleList.addScale([1,3,1,2,1,2,2],["phrygian dominant","freygish"]),a.Music.ScaleList.addScale([2,1,2,2,2,2,1],["ascending melodic minor","jazz minor"]),a.Music.ScaleList.addScale([1,2,1,2,2,2,2],["altered"]),a.Music.ScaleList.addScale([1,3,1,2,1,2,2],["spanish"]),a.Music.ScaleList.addScale([1,3,1,2,1,3,1],["double harmonic","hungarian minor","minor gypsy","spanish gypsy"]),a.Music.ScaleList.addScale([1,3,2,2,2,1,1],["enigmatic"]),a.Music.ScaleList.addScale([1,2,2,2,2,2,1],["neapolitan"]),a.Music.ScaleList.addScale([1,2,2,2,1,3,1],["neapolitan minor"]),a.Music.ScaleList.addScale([2,2,2,2,2,2],["whole-tone"]),a.Music.ScaleList.addScale([3,1,3,1,3,1],["augmented"]),a.Music.ScaleList.addScale([3,1,3,2,1,2],["major blues"]),a.Music.ScaleList.addScale([3,2,1,1,3,2],["minor blues"]),a.Music.ScaleList.addScale([2,2,1,2,4,1],["ryukyu (hexa)"]),a.Music.ScaleList.addScale([2,2,3,2,3],["major penta"]),a.Music.ScaleList.addScale([3,2,2,3,2],["minor penta","ryo"]),a.Music.ScaleList.addScale([1,4,2,2,3],["in"]),a.Music.ScaleList.addScale([2,3,2,2,3],["yo"]),a.Music.ScaleList.addScale([3,2,2,3,2],["min'yo"]),a.Music.ScaleList.addScale([4,1,2,4,1],["ryukyu"]),a.Music.ScaleList.addScale([1,4,2,3,2],["insen"]),a.Music.ScaleList.addScale([1,4,2,1,4],["hirajoshi"]),a.Music.ScaleList.addScale([1,4,1,4,2],["iwato"]),a.Music.ScaleList.addScale([5,4,3],["bugle"]),a}();